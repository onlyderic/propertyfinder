/*!
 * jCarousel Lite - v1.8.2 - 2013-03-13
 * http://kswedberg.github.com/jquery-carousel-lite/
 * Copyright (c) 2013 Karl Swedberg
 * Licensed MIT (http://kswedberg.github.com/jquery-carousel-lite/blob/master/LICENSE-MIT)
 */

(function(e){function t(e,t){return t.autoStop&&(t.circular?t.autoStop:Math.min(e,t.autoStop))}function i(e){this.id&&(this.id+=e)}e.jCarouselLite={version:"1.8.3",curr:0},e.fn.jCarouselLite=function(a){var s=e.extend(!0,{},e.fn.jCarouselLite.defaults,a),n=Math.ceil,l=Math.abs;return this.each(function(){function a(){return F.slice(Y).slice(0,z)}function o(t,i){if(g)return!1;i=i||{};var n=Y,l=t>Y,o=i.speed||s.speed,r=i.offset||0;return s.beforeStart&&s.beforeStart.call(x,a(),l),F.removeClass(s.activeClass),s.circular?(t>Y&&t>X-z?(Y%=D,t-=D,w.css(j,-Y*p.liSize-r)):Y>t&&0>t&&(Y+=D,t+=D,w.css(j,-Y*p.liSize-r)),Y=t+t%1):(0>t?t=0:t>X-P&&(t=X-P),Y=t,0===Y&&s.first&&s.first.call(this,a(),l),Y===X-P&&s.last&&s.last.call(this,a(),l),s.btnPrev&&s.$btnPrev.toggleClass(s.btnDisabledClass,0===Y),s.btnNext&&s.$btnNext.toggleClass(s.btnDisabledClass,Y===X-P)),I(Y,E),e.jCarouselLite.curr=Y,n!==Y||i.force?(g=!0,m[j]=-(Y*p.liSize),w.animate(m,o,s.easing,function(){s.afterEnd&&s.afterEnd.call(x,a(),l),g=!1}),F.eq(Y).addClass(s.activeClass),Y):(s.afterEnd&&s.afterEnd.call(x,a(),l),Y)}var r,c,u,d,v,f,h,b="ontouchend"in document,p={div:{},ul:{},li:{}},C=!0,g=!1,j=s.vertical?"top":"left",m={},S=s.vertical?"height":"width",A=this,x=e(this),w=x.find("ul").eq(0),T=w.children("li"),D=T.length,y=s.visible,z=n(y),P=Math.floor(y),N=Math.min(s.start,D-1),$=1,L=0,E={},G={},M={},W=s.vertical?"y":"x",q=s.vertical?"x":"y",k=s.init.call(this,s,T);if(k!==!1){x.data("dirjc",$),x.data(j+"jc",x.css(j)),s.circular&&(r=T.slice(D-z).clone(!0).each(i),c=T.slice(0,z).clone(!0).each(i),w.prepend(r).append(c),N+=z,L=z);var I=function(t,i){t=n(t);var a,l=(t-L)%D,o=l+P;return i.go&&(a=e(s.btnGo),a.removeClass(s.activeClass).removeClass(s.visibleClass),a.eq(l).addClass(s.activeClass),a.slice(l,l+P).addClass(s.visibleClass),o>a.length&&a.slice(0,o-a.length).addClass(s.visibleClass)),i.pager&&(u.removeClass(s.activeClass),u.eq(n(l/y)).addClass(s.activeClass)),l},F=w.children("li"),X=F.length,Y=N;e.jCarouselLite.curr=Y;var H=function(e){var t,i,a;return e?(p.div[S]="",p.li={width:"",height:""},p):(t=s.vertical?F.outerHeight(!0):F.outerWidth(!0),i=t*X,a=t*y,p.div[S]=a+"px",p.ul[S]=i+"px",p.ul[j]=-(Y*t)+"px",p.li={width:F.width(),height:F.height()},p.liSize=t,p)},Q=function(t){var i,a,n={div:{visibility:"visible",position:"relative",zIndex:2,left:"0"},ul:{margin:"0",padding:"0",position:"relative",listStyleType:"none",zIndex:1},li:{overflow:s.vertical?"hidden":"visible","float":s.vertical?"none":"left"}};t&&(i=H(!0),x.css(i.div),w.css(i.ul),F.css(i.li)),i=H(),s.autoCSS&&C&&C&&(e.extend(!0,i,n),C=!1),s.autoWidth&&(a=parseInt(x.css(S),10),i.li[S]=a/s.visible,p.liSize=i.li[S],i.ul[S]=p.liSize*X+"px",i.ul[j]=-(Y*p.liSize)+"px",i.div[S]=a),s.autoCSS&&(F.css(i.li),w.css(i.ul),x.css(i.div))};Q();var B=0,J=t(D,s),K="number"==typeof s.auto?s.auto:s.scroll,O=function(){A.setAutoAdvance=setTimeout(function(){(!J||J>B)&&($=x.data("dirjc"),o(Y+$*K),B++,O())},s.timeout)};if(e.each(["btnPrev","btnNext"],function(t,i){s[i]&&(s["$"+i]=e.isFunction(s[i])?s[i].call(x[0]):e(s[i]),s["$"+i].bind("click.jc",function(e){e.preventDefault();var i=0===t?Y-s.scroll:Y+s.scroll;return s.directional&&x.data("dirjc",t?1:-1),o(i)}))}),s.circular||(s.btnPrev&&0===N&&s.$btnPrev.addClass(s.btnDisabledClass),s.btnNext&&N+P>=X&&s.$btnNext.addClass(s.btnDisabledClass)),s.btnGo&&(e.each(s.btnGo,function(t,i){e(i).bind("click.jc",function(e){return e.preventDefault(),o(s.circular?y+t:t)})}),E.go=1),s.autoPager){d=n(D/y),u=[];for(var R=0;d>R;R++)u.push('<li><a href="#">'+(R+1)+"</a></li>");u.length>1&&(u=e("<ul>"+u.join("")+"</ul>").appendTo(s.autoPager).find("li"),u.find("a").each(function(t){e(this).bind("click.jc",function(e){e.preventDefault();var i=t*y;return s.circular&&(i+=y),o(i)})}),E.pager=1)}I(N,E),s.mouseWheel&&x.mousewheel&&x.bind("mousewheel.jc",function(e,t){return t>0?o(Y-s.scroll):o(Y+s.scroll)}),s.pause&&s.auto&&!b&&x.bind("mouseenter.jc",function(){x.trigger("pauseCarousel.jc")}).bind("mouseleave.jc",function(){x.trigger("resumeCarousel.jc")}),s.auto&&O(),e.jCarouselLite.vis=a,x.bind("go.jc",function(e,t,i){t===void 0&&(t="+=1");var a="string"==typeof t&&/(\+=|-=)(\d+)/.exec(t);a?t="-="===a[1]?Y-1*a[2]:Y+1*a[2]:t+=N,o(t,i)}).bind("startCarousel.jc",function(){clearTimeout(A.setAutoAdvance),A.setAutoAdvance=void 0,x.trigger("go","+="+s.scroll),O(),x.removeData("pausedjc").removeData("stoppedjc")}).bind("resumeCarousel.jc",function(e,t){if(!A.setAutoAdvance){clearTimeout(A.setAutoAdvance),A.setAutoAdvance=void 0;var i=x.data("stoppedjc");(t||!i)&&(O(),x.removeData("pausedjc"),i&&x.removeData("stoppedjc"))}}).bind("pauseCarousel.jc",function(){clearTimeout(A.setAutoAdvance),A.setAutoAdvance=void 0,x.data("pausedjc",!0)}).bind("stopCarousel.jc",function(){clearTimeout(A.setAutoAdvance),A.setAutoAdvance=void 0,x.data("stoppedjc",!0)}).bind("refreshCarousel.jc",function(){Q(s.autoCSS)}).bind("endCarousel.jc",function(){A.setAutoAdvance&&(clearTimeout(A.setAutoAdvance),A.setAutoAdvance=void 0),s.btnPrev&&s.$btnPrev.addClass(s.btnDisabledClass).unbind(".jc"),s.btnNext&&s.$btnNext.addClass(s.btnDisabledClass).unbind(".jc"),s.btnGo&&e.each(s.btnGo,function(t,i){e(i).unbind(".jc")}),s.circular&&(F.slice(0,z).remove(),F.slice(-z).remove()),e.each([j+"jc","pausedjc","stoppedjc","dirjc"],function(e,t){x.removeData(t)}),x.unbind(".jc")}),h={touchstart:function(e){M.x=0,M.y=0,G.x=e.targetTouches[0].pageX,G.y=e.targetTouches[0].pageY,G[j]=parseFloat(w.css(j)),G.time=+new Date},touchmove:function(e){var t=e.targetTouches.length;1===t?(e.preventDefault(),M.x=e.targetTouches[0].pageX,M.y=e.targetTouches[0].pageY,m[j]=G[j]+(M[W]-G[W]),w.css(m)):M=G},touchend:function(){if(M.x){var e=G[W]-M[W],t=l(e),i=t>s.swipeThresholds[W],a=l(G[q]-M[q])<s.swipeThresholds[q],n=+new Date-G.time,o=s.swipeThresholds.time>n,r=e>0?"+=":"-=",c=r+s.scroll,u={force:!0};o&&i&&a?u.speed=s.speed/2:!o&&p.liSize/2>t||!i||o&&!a?c="+=0":!o&&t>p.liSize/2&&(c=Math.round(t/p.liSize),c=r+(c>s.visible?s.visible:c),u.offset=e),x.trigger("go.jc",[c,u]),M={}}}},b&&s.swipe&&x.bind("touchstart touchmove touchend",function(e){e=e.originalEvent,h[e.type](e)}),s.responsive&&(f=s.autoCSS,e(window).bind("resize",function(){f&&(w.width(2*w.width()),f=!1),clearTimeout(v),v=setTimeout(function(){x.trigger("refreshCarousel.jc"),f=s.autoCSS},100)}))}}),this},e.fn.jCarouselLite.defaults={btnPrev:null,btnNext:null,btnGo:null,autoPager:null,btnDisabledClass:"disabled",activeClass:"active",visibleClass:"vis",mouseWheel:!1,speed:200,easing:null,timeout:4e3,auto:!1,directional:!1,autoStop:!1,pause:!0,vertical:!1,circular:!0,visible:3,start:0,scroll:1,autoCSS:!0,responsive:!1,autoWidth:!1,swipe:!0,swipeThresholds:{x:80,y:120,time:150},init:function(){},first:null,last:null,beforeStart:null,afterEnd:null}})(jQuery);